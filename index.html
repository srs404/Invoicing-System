<!DOCTYPE html>
<html lang="en">

<head>
    <title>TripUp Invoice</title>
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Stylesheet -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="Assets/CSS/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="Assets/CSS/receipt.css">


    <!-- Modal: 1 -->
    <!-- Title: Customer Information Modal -->
    <!-- ~ Description: This is the infomation page of the modal or first page -->

    <div class="modal fade" id="customerInformationModal" tabindex="-1" aria-labelledby="customerInformationModal"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="customerInformationModal">Receipt Number: <span
                            id="invoiceNumber">070124-001</span>
                    </h1>
                    <button type="button" id="modalCloseBtn" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body p-3">
                    <form class="row g-3">

                        <div class="col-md-4 position-relative">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" placeholder="Sami Rahman">
                        </div>
                        <div class="col-md-4 position-relative">
                            <label for="email" class="form-label">Email</label>
                            <input type="text" class="form-control" id="email" placeholder="sami@rahman.dev">
                        </div>
                        <div class="col-md-4 position-relative">
                            <label for="phone-number" class="form-label">Phone Number</label>
                            <div class="input-group">
                                <span class="input-group-text" id="phone-Number-Prepend">+880</span>
                                <input type="number" max="1999999999" placeholder="1625469920" class="form-control"
                                    id="phone-number" aria-describedby="phone-Number-Prepend">
                            </div>
                        </div>
                        <div class="col-md-3 position-relative">
                            <label for="payment-date" class="form-label">Payment Date</label><input
                                class="form-check-input bg-dark" type="checkbox" style="margin-left: 10px;"
                                id="payment-date-checkbox" onchange="enableCurrentDateCheckbox(this)">
                            <input type="datetime-local" onload="setDefaultDate()" id="payment-date"
                                class="form-control" onchange="checkDate('unlock-due-date')" disabled>

                        </div>
                        <div class="col-md-3 position-relative">
                            <label for="due-date" class="form-label">Due Date</label>
                            <input type="datetime-local" id="due-date" class="form-control" onchange="checkDate('')">
                        </div>
                        <div class="col-md-3 position-relative">
                            <label for="payment-method" class="form-label">Payment Method</label>
                            <select class="form-select" id="payment-method">
                                <option selected disabled value="">Choose...</option>
                                <option value="Bkash">Bkash</option>
                                <option value="Nagad">Nagad</option>
                                <option value="Rocket">Rocket</option>
                                <option value="Bank-transfer">Bank Transfer</option>
                                <option value="Cash">Cash</option>
                            </select>
                        </div>
                        <div class="col-md-3 position-relative">
                            <label for="payment-status" class="form-label">Payment Status</label>
                            <select class="form-select" id="payment-status">
                                <option selected disabled value="">Choose...</option>
                                <option value="Paid">Paid</option>
                                <option value="Unpaid">Unpaid</option>
                                <option value="Partially-paid">Partially Paid</option>
                            </select>
                        </div>
                </div>
                </form>
                <div class="modal-footer">
                    <button type="button" id="modalDiscardBtn" class="btn btn-danger" data-bs-dismiss="modal"
                        style="position: absolute; left: 10px;">Discard</button>
                    <button type="submit" id="nextModalBtn" class="btn btn-outline-dark"><span
                            class="fa fa-arrow-right"></span></button>
                </div>

            </div>
        </div>
    </div>

    <!-- 
        ! ==========================================
        ! END: customerInformationModal
        ! ==========================================
    -->


    <!-- Modal: 2 -->
    <!-- 
        Title: Item Modal
        ~ Description: This is the primary modal for creating new invoice
    -->
    <div class="modal fade" id="createNewModal" tabindex="-1" aria-labelledby="createNewLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="createNewLabel">Receipt Number: <span
                            id="invoiceNumber">070124-001</span>
                    </h1>
                    <button type="button" id="tableModalCloseBtn" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body p-3" style="height: 400px;">
                    <div class="col-md-12" style="text-align: right; margin-bottom: 10px;">
                        <button class="btn btn-primary" id="addNewItemBtn"><span class="fa fa-plus"></span> New
                            Item</button>
                    </div>
                    <form id="item-form" class="row g-3">
                        <div class="col-md-12">
                            <div class="table-responsive-sm"
                                style="max-height: 400px; margin-bottom: 10px; min-height: 300px; border-bottom: 1px solid black; overflow-y: auto;">
                                <table class="table text-center" id="item-table">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Item Name</th>
                                            <th>Item Description</th>
                                            <th><label for="price-checkbox">Price</label> <input
                                                    class="form-check-input" type="checkbox" value=""
                                                    id="price-checkbox">
                                            </th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr></tr>
                                    </tbody>
                                </table>
                            </div>
                    </form>
                </div>

                <!-- Subtotal Input Form -->
                <div id="row" style="margin-bottom: 10px;">
                    <div class="input-group">
                        <div class="form-floating">
                            <input style="text-align: right; cursor: not-allowed;" type="number" disabled
                                class="form-control" id="subtotal" name="subtotal" placeholder="0000"
                                onchange="if(document.getElementById('discount').disabled) { handleDiscount('total-payable'); } else if(document.getElementById('discountAmount').disabled) {handleDiscount('total-payable')} else { handleDiscount('discount'); }">
                            <label for="discount">Subtotal</label>
                        </div>
                        <span class="input-group-text" style="cursor: not-allowed;">BDT</span>
                    </div>
                </div>

                <!-- Discount Input Form -->
                <div class="col-md-12 position-relative">
                    <div class="col-md-12 position-absolute top-0 end-0">
                        <div class="row" style="margin-bottom: 10px;">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input style="text-align: right;" type="number" class="form-control" min="0"
                                        max="100" oninput="handleDiscount('discount')" id="discount" name="discount"
                                        placeholder="Discount"> <label for="discount">Discount</label>
                                </div>
                                <span class="input-group-text" style="cursor: not-allowed;"><span
                                        class="fa fa-percent"></span></span>
                                <div class="form-floating">
                                    <input style="text-align: right;" type="number" class="form-control"
                                        id="discountAmount" oninput="handleDiscount('discountAmount')"
                                        placeholder="1000">
                                    <label for="discountAmount">Amount</label>
                                </div>
                                <span class="input-group-text" style="cursor: not-allowed; width: 55px;">BDT</span>
                            </div>
                        </div>


                        <!-- Payable Input Form -->
                        <div id="row" style="margin-bottom: 10px;">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input style="text-align: right;" type="number" class="form-control" min="0"
                                        oninput="handleDiscount('total-payable')" id="total-payable"
                                        name="total-payable" placeholder="0000"> <label
                                        for="total-payable">Payable</label>
                                </div>
                                <span class="input-group-text" style="cursor: not-allowed;">BDT</span>
                            </div>
                        </div>
                        <!-- Convenience fee Input Form -->
                        <div id="row" style="margin-bottom: 10px;">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input style="text-align: right;" type="number" class="form-control"
                                        id="convenience-fee" name="convenience-fee" placeholder="0000"> <label
                                        for="convenience-fee" oninput="duePaymentCalculator()">Convenience
                                        Fee</label>
                                </div>
                                <span class="input-group-text" style="cursor: not-allowed;">BDT</span>
                            </div>
                        </div>

                        <!-- Advance Payment Input Form -->
                        <div id="row" style="margin-bottom: 10px;">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input style="text-align: right;" type="number" class="form-control"
                                        id="advance-payment" name="advance-payment" placeholder="0000"> <label
                                        for="advance-payment" oninput="duePaymentCalculator()">Advance
                                        Payment</label>
                                </div>
                                <span class="input-group-text" style="cursor: not-allowed;">BDT</span>
                            </div>
                        </div>

                        <!-- Due Payment Input Form -->
                        <div id="row" style="margin-bottom: 10px;">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input style="text-align: right;" type="number" class="form-control"
                                        id="due-payment" disabled value="0" name="due-payment"> <label
                                        for="due-payment">Due
                                        Payment</label>
                                </div>
                                <span class="input-group-text" style="cursor: not-allowed;">BDT</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="modal-footer">

                <button id="previewInvoiceBTN" class="btn btn-info text-white"><span class="fa fa-eye"></span></button>
                <button type="button" id="backModalBtn" class="btn btn-outline-dark"
                    style="position: absolute; left: 10px; bottom: 10px;"><span
                        class="fa fa-arrow-left"></span></button>
                <button type="submit" class="btn btn-primary">Create</button>
            </div>

        </div>
    </div>
    </div>

    <!-- 
        ! ==========================================
        ! END: Item Modal
        ! ==========================================
    -->


    <!-- Modal 3 -->
    <!-- 
        Title: Item Input Modal
        ~ Description: This is the modal to get table content information
    -->

    <div class="modal fade" id="addNewTableItem" tabindex="-1" data-backdrop="static" data-keyboard="false"
        aria-labelledby="addNewTableItem" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h1 class="modal-title fs-5" id="addNewTableItem">Add New Item</h1>
                    <button type="button" id="modalItemCloseBtn" class="btn-close btn-close-white"
                        data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-3">
                    <div class="mb-3">
                        <label for="item-nameModal" class="form-label">Item Name</label>
                        <select class="form-select" id="item-nameModal">
                            <option selected disabled value="">Choose...</option>
                            <option value="Hotel/Resort">Hotel/Resort</option>
                            <option value="Ship">Ship</option>
                            <option value="Flight">Flight</option>
                            <option value="Package">Package</option>
                            <option value="Bus">Bus</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="item-description-modal" class="form-label">Item Description</label>
                        <textarea class="form-control" id="item-description-modal" rows="6"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="item-price-modal" class="form-label">Item Price</label>
                        <div class="input-group" id="item-price-container-modal">
                            <span class="input-group-text">BDT</span>
                            <input type="number" class="form-control" style="text-align: right;" id="item-price-modal"
                                oninput="subtotalCalculator()" placeholder="0" aria-label="Item Quantity">
                            <span class="input-group-text">৳</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer bg-dark text-bold">
                    <button type="button" id="modalItemClearBtn" class="btn btn-outline-danger" data-bs-dismiss="modal"
                        style="position: absolute; font-weight: bold; left: 10px; bottom: 10px;">Discard</button>
                    <button type="button" class="btn btn-primary" id="modalItemSubmitBtn"
                        data-bs-dismiss="modal">Insert</button>
                </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 
        ! ==========================================
        ! END: Item Input Modal
        ! ==========================================
    -->


    <!-- PRINT PREVIEW IFRAME -->
    <!-- 
        Title: Receipt Preview IFRAME
        ~ Description: This is the modal to preview the receipt
    -->

    <iframe allowfullscreen="true" id="frame" style="visibility: hidden; width: 0px; border: 0; height: 0px;"
        src="print/"></iframe>

    <!-- 
        ! ==========================================
        ! END: PRINT PREVIEW IFRAME
        ! ==========================================
    -->


</head>

<body>
    <div id="editor"></div>
    <div id="mainBodyDiv">
        <!--Main Navigation-->
        <header>
            <!-- Sidebar -->
            <nav id="sidebarMenu" class="collapse d-lg-block sidebar collapse bg-white">
                <div class="position-sticky">
                    <div class="list-group list-group-flush mx-3 mt-4">
                        <a href="#" class="list-group-item list-group-item-action py-2 ripple" id="sidebarCreateNew">
                            <i class="fas fa-chart-area fa-book me-3"></i><span>Create New</span>
                        </a><br><br>
                        <a href="#" class="list-group-item list-group-item-action py-2 ripple active"
                            aria-current="true">
                            <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>Main Dashboard</span>
                        </a>

                        <a href="#" class="list-group-item list-group-item-action py-2 ripple"><i
                                class="fas fa-chart-line fa-fw me-3"></i><span>Analytics (Soon)</span></a>
                        <a href="#" class="list-group-item list-group-item-action py-2 ripple"><i
                                class="fas fa-users fa-fw me-3"></i><span>User Settings</span></a>

                    </div>

                </div>
                <a href="login.html" class="btn btn-danger"
                    style="position: absolute; bottom: 0px; padding: 15px; width: 100%; border-radius: 0px;"><i
                        class="fas fa-money-bill fa-power-off me-3"></i><span>Logout</span></a>
            </nav>
            <!-- Sidebar -->

        </header>
        <!--Main Navigation-->
        <button style="position: absolute; right: 50px; top: 80%;" id="togglePrintBTN">Click Me</button>
        <!--Main layout-->
        <main id="mainBody" style="min-height: calc(100vh - 58px);">

            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between"
                        style="padding-left: 12px; padding-bottom: 10px; padding-right: 12px;">
                        <form class="input-group w-25">
                            <input id="mySearch" autocomplete="off" type="search" class="form-control rounded border-3"
                                placeholder='Search (ctrl + "/" to focus)' />
                        </form>
                        <button class="btn btn-primary" id="newInvoice"><span class="fa fa-plus"></span> New</button>
                    </div>
                    <div class="container">
                        <div class="table-responsive text-center">
                            <table class="table table-striped" id="myTable">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Invoice Number</th>
                                        <th>Name</th>
                                        <th>Date</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>

                                    <tr>
                                        <td>INV-001</td>
                                        <td>Anisul Hoque</td>
                                        <td>2023-01-01</td>
                                        <td>400.00</td>
                                        <td style="color: green;">Paid</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm"><span
                                                    class="fa fa-magnifying-glass"></span></button>
                                            <button class="btn btn-success btn-sm"><span
                                                    class="fa fa-pencil"></span></button>
                                            <button class="btn btn-danger btn-sm"><span class="fa fa-x"></span></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>INV-002</td>
                                        <td>Rabbi Hoque</td>
                                        <td>2023-01-01</td>
                                        <td>500.00</td>
                                        <td style="color: green; font-weight: bold;">Paid</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm"><span
                                                    class="fa fa-magnifying-glass"></span></button>
                                            <button class="btn btn-success btn-sm"><span
                                                    class="fa fa-pencil"></span></button>
                                            <button class="btn btn-danger btn-sm"><span class="fa fa-x"></span></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>INV-002</td>
                                        <td>Mehedi Hoque</td>
                                        <td>2023-01-07</td>
                                        <td>2530.00</td>
                                        <td style="color: red;">Unpaid</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm"><span
                                                    class="fa fa-magnifying-glass"></span></button>
                                            <button class="btn btn-success btn-sm"><span
                                                    class="fa fa-pencil"></span></button>
                                            <button class="btn btn-danger btn-sm"><span class="fa fa-x"></span></button>
                                        </td>
                                    </tr>
                                    <!-- Add more rows as needed -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>


        <!--Main layout-->

        <footer id="footerMenu" style="position: absolute; bottom: 0px;"
            class="bg-light text-center shadow-lg border-top">
            <!-- Copyright -->
            <div class="text-center p-3" style="">
                © 2024 Copyright:
                <a class="text-dark" href="https://www.linkedin.com/in/srs404">TripUp Inc.</a>
                | All Rights Reserved
            </div>
            <!-- Copyright -->
        </footer>
    </div>


    <!-- Bootstrap JS and Popper.js (optional) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="Assets/JS/main.js"></script>
    <script src="Assets/JS/modal.js"></script>
    <script src="Assets/JS/pdf.js"></script>

    <script>
        $(document).ready(function () {
            // DataTable
            var myTable = $('#myTable').DataTable({
                "lengthMenu": [
                    [5, 10, 25, 50, -1],
                    [5, 10, 25, 50, "All"]
                ],
                responsive: true,
                lengthChange: false,
                pageLength: 9,
                language: {
                    search: "Find",
                },
                info: false,
            });

            // Remove the default search input
            $(".dataTables_filter").parent().hide();

            // Search input
            $('#mySearch').on('keyup', function () {
                myTable.search(this.value).draw();
            });

            $('#togglePrintBTN').on('click', function () {
                $('#receiptPreviewModal').modal('toggle');
            });

            $('#previewInvoiceBTN').click(function () {
                let wspFrame = document.getElementById('frame').contentWindow;
                wspFrame.focus();
                wspFrame.print();
            });


            // $('#previewSubmitBtn').on('click', function () {
            //     printDiv();
            // });

            // function printDiv() {
            //     $('#receiptPreviewModal').modal('hide');

            //     var printContents = document.getElementById('printBody').innerHTML;
            //     var originalContents = document.getElementById('mainBodyDiv').innerHTML;
            //     document.getElementById('mainBodyDiv').innerHTML = printContents;
            //     window.print();
            //     window.location.reload();
            //     document.getElementById('mainBodyDiv').innerHTML = originalContents;

            // }



        });
    </script>
</body>

</html>